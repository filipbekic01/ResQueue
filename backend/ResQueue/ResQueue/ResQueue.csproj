<Project Sdk="Microsoft.NET.Sdk.Web">
  <PropertyGroup>
    <EnableSdkContainerSupport>true</EnableSdkContainerSupport>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Update="AspNetCore.Identity.Mongo" Version="9.0.0" />
    <PackageReference Update="Stripe.net" Version="46.0.0" />
    <PackageReference Update="MailKit" Version="4.8.0" />
    <PackageReference Update="MongoDB.Driver" Version="2.29.0" />
  </ItemGroup>

  <Target Name="Deploy Vue" BeforeTargets="Publish">
    <Exec Command="npm ci" WorkingDirectory="../../../frontend" />
    <Exec Command="npm run build:prod" WorkingDirectory="../../../frontend" />
    <RemoveDir Directories="$(PublishDir)wwwroot" />
    <ItemGroup>
      <CopyDist Include="../../../frontend/dist/**/*.*" />
    </ItemGroup>
    <Copy SourceFiles="@(CopyDist)" DestinationFiles="@(CopyDist->'$(PublishDir)wwwroot\%(RecursiveDir)%(Filename)%(Extension)')" />
  </Target>
</Project>